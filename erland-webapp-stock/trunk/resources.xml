<?xml version="1.0" encoding="ISO-8859-1"?>
<resources>
    <commands>
        <command id="default">
            <class>erland.webapp.common.DefaultCommand</class>
        </command>
        <command id="login">
            <class>erland.webapp.usermgmt.LoginCommand</class>
        </command>
        <command id="logout">
            <class>erland.webapp.usermgmt.LogoutCommand</class>
        </command>
        <command id="xmlkurser">
            <class>erland.webapp.stocks.GetStockCommand</class>
            <role>user</role>
        </command>
        <command id="stockaccount">
            <class>erland.webapp.stocks.StockAccountCommand</class>
            <role>user</role>
        </command>
        <command id="datevaluediagram">
            <class>erland.webapp.diagram.DateValueDiagramCommand</class>
            <role>user</role>
        </command>
        <command id="datevaluediagramservices">
            <class>erland.webapp.common.NoneCommand</class>
            <role>user</role>
        </command>
        <command id="stockaccountmgmt">
            <class>erland.webapp.common.MenuCommand</class>
            <role>user</role>
            <save>menucmd</save>
        </command>
        <command id="stockaccountmgmtpermanent">
            <class>erland.webapp.common.NoneCommand</class>
            <role>user</role>
        </command>
        <command id="stockaccountmgmtpurchaseonce">
            <class>erland.webapp.common.NoneCommand</class>
            <role>user</role>
        </command>
        <command id="stockaccountmgmtcontinously">
            <class>erland.webapp.common.NoneCommand</class>
            <role>user</role>
        </command>
        <command id="stockaccountservices">
            <class>erland.webapp.common.NoneCommand</class>
            <role>user</role>
        </command>
        <command id="stockaccountaddsingle">
            <class>erland.webapp.stocks.AccountMgmtAddSingleCommand</class>
            <role>user</role>
        </command>
        <command id="stockaccountaddmultiple">
            <class>erland.webapp.stocks.AccountMgmtAddContinouslyCommand</class>
            <role>user</role>
        </command>
        <command id="stockaccountaddpermanent">
            <class>erland.webapp.stocks.AccountMgmtAddPermanentCommand</class>
            <role>user</role>
        </command>
        <command id="stockaccountnewsingle">
            <class>erland.webapp.common.NoneCommand</class>
            <role>user</role>
        </command>
        <command id="stockaccountnewmultiple">
            <class>erland.webapp.common.NoneCommand</class>
            <role>user</role>
        </command>
        <command id="stockaccountnewpermanent">
            <class>erland.webapp.common.NoneCommand</class>
            <role>user</role>
        </command>
        <command id="stockaccountremovesingle">
            <class>erland.webapp.stocks.AccountMgmtRemoveSingleCommand</class>
            <role>user</role>
        </command>
        <command id="stockaccountremovemultiple">
            <class>erland.webapp.stocks.AccountMgmtRemoveContinouslyCommand</class>
            <role>user</role>
        </command>
        <command id="stockaccountremovepermanent">
            <class>erland.webapp.stocks.AccountMgmtRemovePermanentCommand</class>
            <role>user</role>
        </command>
    </commands>
    <entities>
        <entity id="user">
            <class>erland.webapp.usermgmt.User</class>
            <data id="storage">
                <class>erland.webapp.common.GenericEntityStorage</class>
                <name>sql</name>
            </data>
            <data id="sql">
                <datasource>jdbc/users</datasource>
                <table>users</table>
                <fields>
                    <field id="username">
                        <column>username</column>
                        <type>String</type>
                        <identity>true</identity>
                    </field>
                    <field id="firstName">
                        <column>firstname</column>
                        <type>String</type>
                    </field>
                    <field id="lastName">
                        <column>lastname</column>
                        <type>String</type>
                    </field>
                    <field id="password">
                        <column>password</column>
                        <type>String</type>
                    </field>
                </fields>
            </data>
        </entity>
        <entity id="userapplicationrole">
            <class>erland.webapp.usermgmt.UserApplicationRole</class>
            <data id="storage">
                <class>erland.webapp.common.GenericEntityStorage</class>
                <name>sql</name>
            </data>
            <data id="sql">
                <datasource>jdbc/users</datasource>
                <table>userapplicationroles</table>
                <fields>
                    <field id="username">
                        <column>username</column>
                        <type>String</type>
                        <identity>true</identity>
                    </field>
                    <field id="application">
                        <column>application</column>
                        <type>String</type>
                        <identity>true</identity>
                    </field>
                    <field id="role">
                        <column>role</column>
                        <type>String</type>
                        <identity>true</identity>
                    </field>
                </fields>
                <queries>
                    <query id="allforuserandapplication">
                        <querystring>username=? and application=?</querystring>
                        <fields>
                            <field id="1">
                                <field>username</field>
                                <type>String</type>
                            </field>
                            <field id="2">
                                <field>application</field>
                                <type>String</type>
                            </field>
                        </fields>
                    </query>
                </queries>
            </data>
        </entity>
        <entity id="stockaccount">
            <class>erland.webapp.stocks.DatabaseStockAccount</class>
        </entity>
        <entity id="account">
            <class>erland.webapp.stocks.Account</class>
            <data id="storage">
                <class>erland.webapp.common.GenericEntityStorage</class>
                <name>sql</name>
            </data>
            <data id="sql">
                <datasource>jdbc/stock</datasource>
                <table>accounts</table>
                <fields>
                    <field id="accountId">
                        <column>accountid</column>
                        <type>Integer</type>
                        <identity>true</identity>
                    </field>
                    <field id="username">
                        <column>username</column>
                        <type>String</type>
                    </field>
                </fields>
                <queries>
                    <query id="allforuser">
                        <querystring>username=?</querystring>
                        <fields>
                            <field id="1">
                                <field>username</field>
                                <type>String</type>
                            </field>
                        </fields>
                    </query>
                </queries>
            </data>
        </entity>
        <entity id="resource">
            <class>erland.webapp.common.Resource</class>
            <data id="storage">
                <class>erland.webapp.common.GenericEntityStorage</class>
                <name>sql</name>
            </data>
            <data id="sql">
                <datasource>jdbc/stock</datasource>
                <table>resources</table>
                <fields>
                    <field id="id">
                        <column>id</column>
                        <type>String</type>
                        <identity>true</identity>
                    </field>
                    <field id="value">
                        <column>value</column>
                        <type>String</type>
                    </field>
                </fields>
            </data>
        </entity>
        <entity id="transaction">
            <class>erland.webapp.stocks.Transaction</class>
            <data id="storage">
                <class>erland.webapp.common.GenericEntityStorage</class>
                <name>sql</name>
            </data>
            <data id="sql">
                <datasource>jdbc/stock</datasource>
                <table>transactions</table>
                <fields>
                    <field id="accountId">
                        <column>accountid</column>
                        <type>Integer</type>
                        <identity>true</identity>
                    </field>
                    <field id="type">
                        <column>type</column>
                        <type>Integer</type>
                        <identity>true</identity>
                    </field>
                    <field id="brokerId">
                        <column>brokerid</column>
                        <type>String</type>
                        <identity>true</identity>
                    </field>
                    <field id="stockId">
                        <column>stockid</column>
                        <type>String</type>
                        <identity>true</identity>
                    </field>
                    <field id="date">
                        <column>date</column>
                        <type>Date</type>
                        <identity>true</identity>
                    </field>
                    <field id="price">
                        <column>price</column>
                        <type>Double</type>
                    </field>
                    <field id="value">
                        <column>value</column>
                        <type>Double</type>
                    </field>
                </fields>
                <queries>
                    <query id="permanententriesforaccountid">
                        <querystring>(type=1 or type=6) and accountid=?</querystring>
                        <orderstring>order by brokerid,stockid,date</orderstring>
                        <fields>
                            <field id="1">
                                <field>accountid</field>
                                <type>Integer</type>
                            </field>
                        </fields>
                    </query>
                    <query id="purchaseonceentriesforaccountid">
                        <querystring>(type=2 or type=3 or type=5) and accountid=?</querystring>
                        <orderstring>order by brokerid,stockid,date</orderstring>
                        <fields>
                            <field id="1">
                                <field>accountid</field>
                                <type>Integer</type>
                            </field>
                        </fields>
                    </query>
                    <query id="purchasecontinouslyentriesforaccountid">
                        <querystring>type=4 and accountid=?</querystring>
                        <orderstring>order by brokerid,stockid,date</orderstring>
                        <fields>
                            <field id="1">
                                <field>accountid</field>
                                <type>Integer</type>
                            </field>
                        </fields>
                    </query>
                </queries>
            </data>
        </entity>
        <entity id="stockaccountstockentry">
            <class>erland.webapp.stocks.StockAccountStockEntry</class>
            <data id="storage">
                <class>erland.webapp.common.GenericEntityStorage</class>
                <name>sql</name>
            </data>
            <data id="sql">
                <datasource>jdbc/stock</datasource>
                <table>transactions</table>
                <fields>
                    <field id="broker">
                        <column>brokerid</column>
                        <type>String</type>
                        <identity>true</identity>
                    </field>
                    <field id="stock">
                        <column>stockid</column>
                        <type>String</type>
                        <identity>true</identity>
                    </field>
                </fields>
                <queries>
                    <query id="uniquestocksforaccountid">
                        <querystring>accountid=?</querystring>
                        <unique>true</unique>
                        <fields>
                            <field id="1">
                                <field>accountid</field>
                                <type>Integer</type>
                            </field>
                        </fields>
                    </query>
                </queries>
            </data>
        </entity>
    </entities>
    <pages>
        <page id="login">
            <page id="success">
                <page>home.jsp</page>
                <page id="main">index.jsp</page>
                <page id="menu">menu.jsp</page>
                <page id="header">welcome.jsp</page>
            </page>
            <page id="failure">
                <forward>portal?do=default</forward>
            </page>
        </page>
        <page id="logout">
            <forward>portal?do=default</forward>
        </page>
        <page id="xmlkurser">
            <page>xmlstocklist.jsp</page>
        </page>
        <page id="stockaccount">
            <page>account.jsp</page>
        </page>
        <page id="stockaccountmgmtpermanent">
            <page>accountmgmtpermanent.jsp</page>
        </page>
        <page id="stockaccountmgmtpurchaseonce">
            <page>accountmgmtpurchaseonce.jsp</page>
        </page>
        <page id="stockaccountmgmtcontinously">
            <page>accountmgmtcontinously.jsp</page>
        </page>
        <page id="stockaccountnewsingle">
            <page>editaccountentry.jsp</page>
        </page>
        <page id="stockaccountnewmultiple">
            <page>editaccountentry.jsp</page>
        </page>
        <page id="stockaccountnewpermanent">
            <page>editaccountentry.jsp</page>
        </page>
        <page id="stockaccountservices">
            <page>account.jsp</page>
        </page>
        <page id="datevaluediagramservices">
            <page>home.jsp</page>
        </page>
        <page id="datevaluediagram">
            <page>home.jsp</page>
        </page>
        <page id="default">
            <page>login.jsp</page>
            <page id="main">index.jsp</page>
            <page id="header">welcomelogin.jsp</page>
            <page id="menu"/>
        </page>
        <page id="notallowed">
            <forward>portal?do=default</forward>
        </page>
        <page id="error">
            <page>error.jsp</page>
        </page>
    </pages>
    <brokers>
        <broker id="robur">
            <name>Robur</name>
            <data id="connection">
                <class>erland.webapp.stocks.robur.RoburConnection</class>
            </data>
        </broker>
        <broker id="sb">
            <name>Stockholmsbörsen</name>
            <data id="connection">
                <class>erland.webapp.stocks.sb.SBConnection</class>
            </data>
        </broker>
    </brokers>
</resources>